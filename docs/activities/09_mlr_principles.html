<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>STAT 155 - Multiple regression principles</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STAT 155</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-activities" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Activities</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-activities">    
        <li>
    <a class="dropdown-item" href="../activities/01_foundations_welcome.html">
 <span class="dropdown-text">Data Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/02_foundations_univariate.html">
 <span class="dropdown-text">Univariate visualization and summaries</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/03_slr_introduction.html">
 <span class="dropdown-text">Simple linear regression: Visualization and Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/04_slr_formalization.html">
 <span class="dropdown-text">Simple linear regression: formalizing concepts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/05_slr_model_eval.html">
 <span class="dropdown-text">Simple linear regression: model evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/06_slr_transformations.html">
 <span class="dropdown-text">Simple linear regression: Transformations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/07_slr_cat_predictor.html">
 <span class="dropdown-text">Simple linear regression: categorical predictor</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/08_mlr_intro.html">
 <span class="dropdown-text">Introduction to multiple regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../activities/09_mlr_principles.html">
 <span class="dropdown-text">Multiple regression principles</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-practice-problems" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Practice Problems</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-practice-problems">    
        <li>
    <a class="dropdown-item" href="../assignments/pp1.html">
 <span class="dropdown-text">Practice Problems 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assignments/pp2.html">
 <span class="dropdown-text">Practice Problems 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assignments/pp3.html">
 <span class="dropdown-text">Practice Problems 3</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../project.html"> 
<span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../r_resources.html"> 
<span class="menu-text">R Resources</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#notes" id="toc-notes" class="nav-link active" data-scroll-target="#notes">Notes</a>
  <ul class="collapse">
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link" data-scroll-target="#learning-goals">Learning goals</a></li>
  <li><a href="#readings-and-videos" id="toc-readings-and-videos" class="nav-link" data-scroll-target="#readings-and-videos">Readings and videos</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a>
  <ul class="collapse">
  <li><a href="#exercise-1-review-visualization" id="toc-exercise-1-review-visualization" class="nav-link" data-scroll-target="#exercise-1-review-visualization">Exercise 1: Review visualization</a></li>
  <li><a href="#exercise-2-review-model" id="toc-exercise-2-review-model" class="nav-link" data-scroll-target="#exercise-2-review-model">Exercise 2: Review model</a></li>
  <li><a href="#exercise-3-review-coefficient-interpretation" id="toc-exercise-3-review-coefficient-interpretation" class="nav-link" data-scroll-target="#exercise-3-review-coefficient-interpretation">Exercise 3: Review coefficient interpretation</a></li>
  <li><a href="#exercise-4-2-categorical-predictors-visualization" id="toc-exercise-4-2-categorical-predictors-visualization" class="nav-link" data-scroll-target="#exercise-4-2-categorical-predictors-visualization">Exercise 4: 2 categorical predictors – visualization</a></li>
  <li><a href="#exercise-5-follow-up" id="toc-exercise-5-follow-up" class="nav-link" data-scroll-target="#exercise-5-follow-up">Exercise 5: follow-up</a></li>
  <li><a href="#exercise-6-2-categorical-predictors-build-the-model" id="toc-exercise-6-2-categorical-predictors-build-the-model" class="nav-link" data-scroll-target="#exercise-6-2-categorical-predictors-build-the-model">Exercise 6: 2 categorical predictors – build the model</a></li>
  <li><a href="#exercise-7-2-categorical-predictors-interpret-the-model" id="toc-exercise-7-2-categorical-predictors-interpret-the-model" class="nav-link" data-scroll-target="#exercise-7-2-categorical-predictors-interpret-the-model">Exercise 7: 2 categorical predictors – interpret the model</a></li>
  <li><a href="#exercise-8-2-quantitative-predictors-visualization" id="toc-exercise-8-2-quantitative-predictors-visualization" class="nav-link" data-scroll-target="#exercise-8-2-quantitative-predictors-visualization">Exercise 8: 2 quantitative predictors – visualization</a></li>
  <li><a href="#exercise-9-follow-up" id="toc-exercise-9-follow-up" class="nav-link" data-scroll-target="#exercise-9-follow-up">Exercise 9: follow-up</a></li>
  <li><a href="#exercise-10-2-quantitative-predictors-modeling" id="toc-exercise-10-2-quantitative-predictors-modeling" class="nav-link" data-scroll-target="#exercise-10-2-quantitative-predictors-modeling">Exercise 10: 2 quantitative predictors – modeling</a></li>
  <li><a href="#exercise-11-which-is-best" id="toc-exercise-11-which-is-best" class="nav-link" data-scroll-target="#exercise-11-which-is-best">Exercise 11: Which is best?</a></li>
  <li><a href="#exercise-12-principles-of-interpretation" id="toc-exercise-12-principles-of-interpretation" class="nav-link" data-scroll-target="#exercise-12-principles-of-interpretation">Exercise 12: Principles of interpretation</a></li>
  </ul></li>
  <li><a href="#extra-practice" id="toc-extra-practice" class="nav-link" data-scroll-target="#extra-practice">Extra practice</a>
  <ul class="collapse">
  <li><a href="#exercise-13-practice-1" id="toc-exercise-13-practice-1" class="nav-link" data-scroll-target="#exercise-13-practice-1">Exercise 13: Practice 1</a></li>
  <li><a href="#exercise-14-practice-2" id="toc-exercise-14-practice-2" class="nav-link" data-scroll-target="#exercise-14-practice-2">Exercise 14: Practice 2</a></li>
  <li><a href="#exercise-15-practice-3" id="toc-exercise-15-practice-3" class="nav-link" data-scroll-target="#exercise-15-practice-3">Exercise 15: Practice 3</a></li>
  <li><a href="#exercise-16-challenge" id="toc-exercise-16-challenge" class="nav-link" data-scroll-target="#exercise-16-challenge">Exercise 16: CHALLENGE</a></li>
  </ul></li>
  <li><a href="#solutions" id="toc-solutions" class="nav-link" data-scroll-target="#solutions">Solutions</a>
  <ul class="collapse">
  <li><a href="#exercise-1-review-visualization-1" id="toc-exercise-1-review-visualization-1" class="nav-link" data-scroll-target="#exercise-1-review-visualization-1">Exercise 1: Review visualization</a></li>
  <li><a href="#exercise-2-review-model-1" id="toc-exercise-2-review-model-1" class="nav-link" data-scroll-target="#exercise-2-review-model-1">Exercise 2: Review model</a></li>
  <li><a href="#exercise-3-review-coefficient-interpretation-1" id="toc-exercise-3-review-coefficient-interpretation-1" class="nav-link" data-scroll-target="#exercise-3-review-coefficient-interpretation-1">Exercise 3: Review coefficient interpretation</a></li>
  <li><a href="#exercise-4-2-categorical-predictors-visualization-1" id="toc-exercise-4-2-categorical-predictors-visualization-1" class="nav-link" data-scroll-target="#exercise-4-2-categorical-predictors-visualization-1">Exercise 4: 2 categorical predictors – visualization</a></li>
  <li><a href="#exercise-5-follow-up-1" id="toc-exercise-5-follow-up-1" class="nav-link" data-scroll-target="#exercise-5-follow-up-1">Exercise 5: follow-up</a></li>
  <li><a href="#exercise-6-2-categorical-predictors-build-the-model-1" id="toc-exercise-6-2-categorical-predictors-build-the-model-1" class="nav-link" data-scroll-target="#exercise-6-2-categorical-predictors-build-the-model-1">Exercise 6: 2 categorical predictors – build the model</a></li>
  <li><a href="#exercise-7-2-categorical-predictors-interpret-the-model-1" id="toc-exercise-7-2-categorical-predictors-interpret-the-model-1" class="nav-link" data-scroll-target="#exercise-7-2-categorical-predictors-interpret-the-model-1">Exercise 7: 2 categorical predictors – interpret the model</a></li>
  <li><a href="#exercise-8-2-quantitative-predictors-visualization-1" id="toc-exercise-8-2-quantitative-predictors-visualization-1" class="nav-link" data-scroll-target="#exercise-8-2-quantitative-predictors-visualization-1">Exercise 8: 2 quantitative predictors – visualization</a></li>
  <li><a href="#exercise-9-follow-up-1" id="toc-exercise-9-follow-up-1" class="nav-link" data-scroll-target="#exercise-9-follow-up-1">Exercise 9: follow-up</a></li>
  <li><a href="#exercise-10-2-quantitative-predictors-modeling-1" id="toc-exercise-10-2-quantitative-predictors-modeling-1" class="nav-link" data-scroll-target="#exercise-10-2-quantitative-predictors-modeling-1">Exercise 10: 2 quantitative predictors – modeling</a></li>
  <li><a href="#exercise-11-which-is-best-1" id="toc-exercise-11-which-is-best-1" class="nav-link" data-scroll-target="#exercise-11-which-is-best-1">Exercise 11: Which is best?</a></li>
  <li><a href="#exercise-13-practice-1-1" id="toc-exercise-13-practice-1-1" class="nav-link" data-scroll-target="#exercise-13-practice-1-1">Exercise 13: Practice 1</a></li>
  <li><a href="#exercise-14-practice-2-1" id="toc-exercise-14-practice-2-1" class="nav-link" data-scroll-target="#exercise-14-practice-2-1">Exercise 14: Practice 2</a></li>
  <li><a href="#exercise-15-practice-3-1" id="toc-exercise-15-practice-3-1" class="nav-link" data-scroll-target="#exercise-15-practice-3-1">Exercise 15: Practice 3</a></li>
  <li><a href="#exercise-16-challenge-1" id="toc-exercise-16-challenge-1" class="nav-link" data-scroll-target="#exercise-16-challenge-1">Exercise 16: CHALLENGE</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Multiple regression principles</h1>
<p class="subtitle lead">Notes and in-class exercises</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="notes" class="level1">
<h1>Notes</h1>
<ul>
<li>You can download a template file to work with <a href="../activity_templates/09_mlr_principles.qmd">here</a>.</li>
<li><strong>File organization:</strong> Save this file in the “Activities” subfolder of your “STAT155” folder.</li>
</ul>
<section id="learning-goals" class="level2">
<h2 class="anchored" data-anchor-id="learning-goals">Learning goals</h2>
<p>Working with multiple predictors in our plots and models can get complicated! There are no <em>recipes</em> for this process, but there are some guiding <em>principles</em> that assist in long-term retention, deeper understanding, and the ability to generalize our tools in new settings.</p>
<p>By the end of this lesson, you should be familiar with some general <em>principles</em> for…</p>
<ul>
<li>incorporating additional quantitative or categorical predictors in a visualization</li>
<li>how additional quantitative or categorical predictors impact the physical representation of a model</li>
<li>interpreting quantitative or categorical coefficients in a multiple regression model</li>
</ul>
</section>
<section id="readings-and-videos" class="level2">
<h2 class="anchored" data-anchor-id="readings-and-videos">Readings and videos</h2>
<p>Before class you should have watched the following video:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=DnXwu1OWgMM">Interpreting multivariate models</a> (<a href="https://drive.google.com/file/d/1fiJL1IbReg6RJmjxRideYzYTyQtWR3Or/view?usp=sharing">slides</a>)</li>
</ul>
</section>
</section>
<section id="exercises" class="level1">
<h1>Exercises</h1>
<p>Let’s revisit the bikeshare data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages &amp; import data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>bikes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://mac-stat.github.io/data/bikeshare.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">rides =</span> riders_registered)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our goal is to understand how / why registered ridership from day to day. To this end, we’ll build various <strong>multiple linear regression</strong> models of <code>rides</code> by different combinations of the possible predictors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check out the data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bikes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="exercise-1-review-visualization" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1-review-visualization">Exercise 1: Review visualization</h2>
<p>Let’s prepare to build a model of <code>rides</code> by <code>windspeed</code> (quantitative) and <code>weekend</code> status (categorical) by construcing a visualization of the relationship between these 3 variables.</p>
<p>Include linear smoothing lines so that we can see a representation of the regression model that we’ll build in the next exercise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot of rides vs windspeed &amp; weekend</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># HINT: Start with a plot of rides vs windspeed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise-2-review-model" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2-review-model">Exercise 2: Review model</h2>
<p>Let’s build the model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bike_model_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> weekend, <span class="at">data =</span> bikes)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(bike_model_1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The model formula thus is:</p>
<p>E[rides | windspeed, weekendTRUE] = 4738.38 - 63.97 * windspeed - 925.16 * weekendTRUE</p>
<p>This model formula is represented by 2 lines, one corresponding to weekends and the other to weekdays. Specify the corresponding sub-model formulas:</p>
<p>weekdays: rides = ___ - ___ windspeed</p>
<p>weekends: rides = ___ - ___ windspeed</p>
</section>
<section id="exercise-3-review-coefficient-interpretation" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3-review-coefficient-interpretation">Exercise 3: Review coefficient interpretation</h2>
<ol type="a">
<li><p>The intercept coefficient, 4738.38, represents the <em>intercept</em> of the sub-model for weekdays, the reference category. What’s its <em>contextual</em> interpretation?</p></li>
<li><p>The <code>windspeed</code> coefficient, -63.97, represents the <em>shared slope</em> of the weekend and weekday sub-models. What’s its <em>contextual</em> interpretation?</p></li>
<li><p>The <code>weekendTRUE</code> coefficient, -925.16, represents the <em>change in intercept</em> for the weekend vs weekday sub-model. What’s its <em>contextual</em> interpretation?</p></li>
</ol>
</section>
<section id="exercise-4-2-categorical-predictors-visualization" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4-2-categorical-predictors-visualization">Exercise 4: 2 categorical predictors – visualization</h2>
<p>Thus far, we’ve explored a couple examples of multiple regression models that have 2 predictors, 1 quantitative and 1 categorical.</p>
<p>So what happens when <em>both</em> predictors are categorical?!</p>
<p>To this end, let’s model <code>rides</code> by <code>weekend</code> status and <code>season</code>.</p>
<p>The below code plots <code>rides</code> vs <code>season</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rides vs season</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> season)) <span class="sc">+</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Modify this code to <em>also</em> include information about <code>weekend</code>. (Hint: Remember the visualization <em>principle</em> that additional categorical predictors require some sort of grouping mechanism / mechanism that distinguishes between the 2 groups.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rides vs season AND weekend</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> season, <span class="at">___ =</span> ___)) <span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise-5-follow-up" class="level2">
<h2 class="anchored" data-anchor-id="exercise-5-follow-up">Exercise 5: follow-up</h2>
<ol type="a">
<li><p>Describe (in words) the relationship of ridership with season and weekend status.</p></li>
<li><p>A model of <code>rides</code> by <code>season</code> alone would be represented by only 4 expected outcomes, 1 for each season. Considering this and the plot above, how do you <em>anticipate</em> a model of <code>rides</code> by <code>season</code> and <code>weekend</code> status will be represented?</p>
<ul>
<li>2 lines, 1 for each weekend status</li>
<li>8 lines, 1 for each possible combination of season and weekend</li>
<li>2 expected outcomes, 1 for each weekend status</li>
<li>8 expected outcomes, 1 for each possible combination of season and weekend</li>
</ul></li>
</ol>
</section>
<section id="exercise-6-2-categorical-predictors-build-the-model" class="level2">
<h2 class="anchored" data-anchor-id="exercise-6-2-categorical-predictors-build-the-model">Exercise 6: 2 categorical predictors – build the model</h2>
<p>Let’s build the multiple regression model of <code>rides</code> vs <code>season</code> and <code>weekend</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>bike_model_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> weekend <span class="sc">+</span> season, bikes)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(bike_model_2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Thus the model formula is</p>
<p>E[rides | weekend, season] = 4260.45 - 912.33 weekendTRUE - 116.38 seasonspring + 438.44 seasonsummer - 1719.06 seasonwinter</p>
<ol type="a">
<li>Use this model to predict the ridership on the following days:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a fall weekday</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span>___  <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span>___</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># a winter weekday    </span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span>___  <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span>___</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># a fall weekend day        </span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span>___  <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span>___</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># a winter weekend day</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span>___  <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span>___ <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span>___</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="a">
<li>We only made 4 predictions here. How many <em>possible</em> predictions does this model produce? Is this consistent with your intuition in the previous exercise?</li>
</ol>
</section>
<section id="exercise-7-2-categorical-predictors-interpret-the-model" class="level2">
<h2 class="anchored" data-anchor-id="exercise-7-2-categorical-predictors-interpret-the-model">Exercise 7: 2 categorical predictors – interpret the model</h2>
<p>Use your above predictions and visualization to fill in the below interpretations of the model coefficients.</p>
<p>Hint: What is the consequence of plugging in 0 or 1 for the different <code>weekend</code> and <code>season</code> categories?</p>
<ol type="a">
<li><p>Interpreting 4260: We expect there to be 4260 riders on (weekdays/weekends) during the (fall/spring/summer/winter).</p></li>
<li><p>Interpreting -912: <em>In any season</em>, we expect there to be 912 (more/fewer) riders on weekends than on ___.</p></li>
<li><p>Interpreting -1719: <em>On both weekdays and weekends</em>, we expect there to be 1719 (more/fewer) riders in winter than in ___.</p></li>
</ol>
</section>
<section id="exercise-8-2-quantitative-predictors-visualization" class="level2">
<h2 class="anchored" data-anchor-id="exercise-8-2-quantitative-predictors-visualization">Exercise 8: 2 quantitative predictors – visualization</h2>
<p>Next, consider the relationship between <code>rides</code> and 2 <em>quantitative</em> predictors: <code>windspeed</code> and <code>temp_feel</code>.</p>
<p>Check out 2 plots of this relationship below.</p>
<p>These reflect the visualization <em>principle</em> that quantitative variables require some sort of numerical scaling mechanism – <code>rides</code> and <code>windspeed</code> get numerical axes, and <code>temp_feel</code> gets size and color scales.</p>
<p><img src="https://mac-stat.github.io/images/155/bikes_multivar_3.png" class="img-fluid"></p>
<p>Modify the code below to recreate these 2 plots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Left plot</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> windspeed, <span class="at">___ =</span> ___)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Right plot</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> windspeed, <span class="at">___ =</span> ___)) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With some new code in the <code>plotly</code> (not <code>ggplot2</code>) package, we can also plot these 3 quantitative variables in 3D, each getting their own axis!</p>
<p>First, enter <code>install.packages("plotly")</code> in the <em>console</em> (not Rmd).</p>
<p>Then play around with this code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> bikes,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>rides, <span class="at">y =</span> <span class="sc">~</span>windspeed, <span class="at">x =</span> <span class="sc">~</span>temp_feel, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">"scatter3d"</span>, <span class="at">mode =</span> <span class="st">"markers"</span>, <span class="at">size =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise-9-follow-up" class="level2">
<h2 class="anchored" data-anchor-id="exercise-9-follow-up">Exercise 9: follow-up</h2>
<ol type="a">
<li><p>Describe (in words) the relationship of ridership with windspeed &amp; temperature.</p></li>
<li><p>A model of <code>rides</code> by <code>windspeed</code> alone would be represented by 1 line. How do you <em>anticipate</em> a model of <code>rides</code> by <code>windspeed</code> and <code>temp_feel</code> status will be represented? HINT: Think about the 3D scatterplot.</p></li>
</ol>
</section>
<section id="exercise-10-2-quantitative-predictors-modeling" class="level2">
<h2 class="anchored" data-anchor-id="exercise-10-2-quantitative-predictors-modeling">Exercise 10: 2 quantitative predictors – modeling</h2>
<p>Let’s build the multiple regression model of <code>rides</code> vs <code>windspeed</code> and <code>temp_feel</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bike_model_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel, bikes)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(bike_model_3))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Thus the model formula is</p>
<p>E[rides | windspeed, temp_feel] = -24.06 - 36.54 windspeed + 55.52 temp_feel</p>
<p>This is the formula of a <em>plane</em>, drawn here:</p>
<p><img src="https://mac-stat.github.io/images/155/ridesVwindVtemp.png" class="img-fluid"></p>
<ol type="a">
<li><p>Interpret the intercept coefficient, -24.06, in context.</p></li>
<li><p>Interpret the <code>windspeed</code> coefficient, -36.54, in context. HINT: This is the slope of the red lines in the <em>right</em> plot, drawn at 3 arbitrary temperatures (40, 60, and 90 degrees).</p></li>
<li><p>Interpret the <code>temp_feel</code> coefficient, 55.52, in context. HINT: This is the slope of the red lines in the left plot, drawn at 3 arbitrary wind speeds (5, 20, and 30 mph).</p></li>
</ol>
</section>
<section id="exercise-11-which-is-best" class="level2">
<h2 class="anchored" data-anchor-id="exercise-11-which-is-best">Exercise 11: Which is best?</h2>
<p>We’ve now observed 3 different models of ridership, each having 2 predictors. The R-squared values of these models, along with those of the simple linear regression models with each predictor alone, are summarized below.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">model</th>
<th style="text-align: left;">predictors</th>
<th style="text-align: left;">R-squared</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>bike_model_1</code></td>
<td style="text-align: left;"><code>windspeed</code> &amp; <code>weekend</code></td>
<td style="text-align: left;">0.119</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>bike_model_2</code></td>
<td style="text-align: left;"><code>weekend</code> &amp; <code>season</code></td>
<td style="text-align: left;">0.349</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>bike_model_3</code></td>
<td style="text-align: left;"><code>windspeed</code> &amp; <code>temp_feel</code></td>
<td style="text-align: left;">0.310</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>bike_model_4</code></td>
<td style="text-align: left;"><code>windspeed</code></td>
<td style="text-align: left;">0.047</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>bike_model_5</code></td>
<td style="text-align: left;"><code>temp_feel</code></td>
<td style="text-align: left;">0.296</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>bike_model_6</code></td>
<td style="text-align: left;"><code>weekend</code></td>
<td style="text-align: left;">0.074</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>bike_model_7</code></td>
<td style="text-align: left;"><code>season</code></td>
<td style="text-align: left;">0.279</td>
</tr>
</tbody>
</table>
<ol type="a">
<li><p>Which model does the best job of explaining the variability in ridership from day to day?</p></li>
<li><p>If you could only pick one predictor, which would it be?</p></li>
<li><p>What happens to R-squared when we add a second predictor to our model, and why does this make sense? For example, how does the R-squared for model 1 (with both windspeed and weekend) compare to those of model 4 (only windspeed) and model 6 (only weekend)?</p></li>
<li><p>Are 2 predictors always better than 1? Provide evidence and explain why this makes sense.</p></li>
</ol>
<p><br>
<br>
</p>
</section>
<section id="exercise-12-principles-of-interpretation" class="level2">
<h2 class="anchored" data-anchor-id="exercise-12-principles-of-interpretation">Exercise 12: Principles of interpretation</h2>
<p>These exercises have revealed some <strong>principles</strong> behind interpreting model coefficients, summarized below.</p>
<p>Review and confirm that these make sense.</p>
<hr>
<p><strong>Principles of interpretation</strong></p>
<p>Consider a multiple linear regression model:</p>
<p><span class="math display">\[E[y | x_1, x_2, ..., x_p] = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + ... + \beta_p x_p\]</span></p>
<p>We can interpret the coefficients as follows:</p>
<ul>
<li><p><span class="math inline">\(\beta_0\)</span> (“beta 0”) is the y-intercept. It describes the typical value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x_1, x_2,..., x_k\)</span> are all 0, ie. when all quantitative predictors are set to 0 and the categorical predictors are set to their reference levels.</p></li>
<li><p><span class="math inline">\(\beta_i\)</span> (“beta i”) is the coefficient of <span class="math inline">\(x_i\)</span>.</p>
<ul>
<li>If <span class="math inline">\(x_i\)</span> is quantitative, <span class="math inline">\(\beta_i\)</span> describes the typical change in <span class="math inline">\(y\)</span> per 1-unit increase in <span class="math inline">\(x_i\)</span> while at a fixed set of the other <span class="math inline">\(x\)</span>.<br>
</li>
<li>If <span class="math inline">\(x_i\)</span> represents a category of a categorical variable, <span class="math inline">\(\beta_i\)</span> describes the typical change in <span class="math inline">\(y\)</span> when we move to this category from the reference category while at a fixed set of the other <span class="math inline">\(x\)</span>.</li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="extra-practice" class="level1">
<h1>Extra practice</h1>
<p>The following exercises provide extra practice. If you don’t get to these during class, you’re encouraged to try them outside class.</p>
<section id="exercise-13-practice-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-13-practice-1">Exercise 13: Practice 1</h2>
<p>Consider the relationship of <code>rides</code> vs <code>weekend</code> and <code>weather_cat</code>.</p>
<ol type="a">
<li>Construct a visualization of this relationship.<br>
</li>
<li>Construct a model of this relationship.<br>
</li>
<li>Interpret the first 3 model coefficients.</li>
</ol>
</section>
<section id="exercise-14-practice-2" class="level2">
<h2 class="anchored" data-anchor-id="exercise-14-practice-2">Exercise 14: Practice 2</h2>
<p>Consider the relationship of <code>rides</code> vs <code>temp_feel</code> and <code>humidity</code>.</p>
<ol type="a">
<li>Construct a visualization of this relationship.<br>
</li>
<li>Construct a model of this relationship.<br>
</li>
<li>Interpret the first 3 model coefficients.</li>
</ol>
</section>
<section id="exercise-15-practice-3" class="level2">
<h2 class="anchored" data-anchor-id="exercise-15-practice-3">Exercise 15: Practice 3</h2>
<p>Consider the relationship of <code>rides</code> vs <code>temp_feel</code> and <code>weather_cat</code>.</p>
<ol type="a">
<li>Construct a visualization of this relationship.<br>
</li>
<li>Construct a model of this relationship.<br>
</li>
<li>Interpret the first 3 model coefficients.</li>
</ol>
</section>
<section id="exercise-16-challenge" class="level2">
<h2 class="anchored" data-anchor-id="exercise-16-challenge">Exercise 16: CHALLENGE</h2>
<p>We’ve explored models with 2 predictors. What about 3 predictors?! Consider the relationship of <code>rides</code> vs <code>temp_feel</code>, <code>humidity</code>, AND <code>weekend</code>.</p>
<ol type="a">
<li>Construct a visualization of this relationship.<br>
</li>
<li>Construct a model of this relationship.<br>
</li>
<li>Interpret each model coefficient.<br>
</li>
<li>If you had to <em>draw</em> the shape of the model trend, what would it look like: a line, parallel lines, a plane, parallel planes?</li>
</ol>
</section>
</section>
<section id="solutions" class="level1">
<h1>Solutions</h1>
<section id="exercise-1-review-visualization-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1-review-visualization-1">Exercise 1: Review visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> windspeed, <span class="at">color =</span> weekend)) <span class="sc">+</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exercise-2-review-model-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2-review-model-1">Exercise 2: Review model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>bike_model_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> weekend, <span class="at">data =</span> bikes)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(bike_model_1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              Estimate Std. Error   t value      Pr(&gt;|t|)
(Intercept) 4738.38053  147.53653 32.116659 1.208405e-141
windspeed    -63.97072   10.45274 -6.119997  1.528443e-09
weekendTRUE -925.15701  119.86330 -7.718434  3.891082e-14</code></pre>
</div>
</div>
<p>weekdays: rides = 4738.38 - 63.97 windspeed</p>
<p>weekends: rides = 4738.38 - 63.97 windspeed - 925.16 = 3813.22 - 63.97 windspeed</p>
</section>
<section id="exercise-3-review-coefficient-interpretation-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3-review-coefficient-interpretation-1">Exercise 3: Review coefficient interpretation</h2>
<ol type="a">
<li><p>On average, there are roughly 4738 riders on <strong>weekdays with 0 windspeed</strong>.</p></li>
<li><ul>
<li>On both weekends and weekdays, every 1 mph increase in windspeed is associated with 64 fewer riders on average.</li>
<li>Holding day type fixed (weekend or weekday), every 1 mph increase in windspeed is associated with 64 fewer riders on average.</li>
</ul></li>
<li><ul>
<li>At any windspeed, weekend days have an average of 925 <em>fewer</em> riders than weekdays.</li>
<li>Holding windspeed fixed, weekend days have an average of 925 <em>fewer</em> riders than weekdays.</li>
</ul></li>
</ol>
</section>
<section id="exercise-4-2-categorical-predictors-visualization-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4-2-categorical-predictors-visualization-1">Exercise 4: 2 categorical predictors – visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> season, <span class="at">fill =</span> weekend)) <span class="sc">+</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exercise-5-follow-up-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-5-follow-up-1">Exercise 5: follow-up</h2>
<ol type="a">
<li><p>In every season, ridership tends to be lower on weekends. Across weekend status, ridership tends to be highest in summer and lowest in winter.</p></li>
<li><p>8 expected outcomes</p></li>
</ol>
</section>
<section id="exercise-6-2-categorical-predictors-build-the-model-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-6-2-categorical-predictors-build-the-model-1">Exercise 6: 2 categorical predictors – build the model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>bike_model_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> weekend <span class="sc">+</span> season, bikes)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(bike_model_2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Estimate Std. Error     t value      Pr(&gt;|t|)
(Intercept)   4260.4492   99.16363  42.9638294 1.384994e-201
weekendTRUE   -912.3324  103.23016  -8.8378473  7.298199e-18
seasonspring  -116.3824  132.76018  -0.8766364  3.809741e-01
seasonsummer   438.4424  132.06413   3.3199205  9.454177e-04
seasonwinter -1719.0572  133.30505 -12.8956646  2.081758e-34</code></pre>
</div>
</div>
<ol type="a">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fall weekday:    </span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4260.45</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># winter weekday:</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2541.39</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fall weekend:    </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span><span class="dv">1</span> <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3348.12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># winter weekend:</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fl">4260.45</span> <span class="sc">-</span> <span class="fl">912.33</span><span class="sc">*</span><span class="dv">1</span> <span class="sc">-</span> <span class="fl">116.38</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">+</span> <span class="fl">438.44</span><span class="sc">*</span><span class="dv">0</span> <span class="sc">-</span> <span class="fl">1719.06</span><span class="sc">*</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1629.06</code></pre>
</div>
</div>
<ol start="2" type="a">
<li>8: 2 weekend categories * 4 season categories</li>
</ol>
</section>
<section id="exercise-7-2-categorical-predictors-interpret-the-model-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-7-2-categorical-predictors-interpret-the-model-1">Exercise 7: 2 categorical predictors – interpret the model</h2>
<ol type="a">
<li>On average there are 4260 riders on <strong>weekdays</strong> during the <strong>fall</strong>.</li>
<li><ul>
<li><em>In any season</em>, there are on oaverage 912 <strong>fewer</strong> riders on weekends than on weekdays.</li>
<li>Holding season constant (for a fixed season), there are on average 912 <strong>fewer</strong> riders on weekends than on weekdays.</li>
</ul></li>
<li><ul>
<li><em>On both weekdays and weekends</em>, there are on average 1719 <strong>fewer</strong> riders in winter than in <strong>fall</strong>.</li>
<li>Holding day type constant (weekday vs.&nbsp;weekend), there are on average 1719 <strong>fewer</strong> riders in winter than in <strong>fall</strong>.</li>
</ul></li>
</ol>
</section>
<section id="exercise-8-2-quantitative-predictors-visualization-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-8-2-quantitative-predictors-visualization-1">Exercise 8: 2 quantitative predictors – visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> windspeed, <span class="at">size =</span> temp_feel)) <span class="sc">+</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> windspeed, <span class="at">color =</span> temp_feel)) <span class="sc">+</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> bikes,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>rides, <span class="at">y =</span> <span class="sc">~</span>windspeed, <span class="at">x =</span> <span class="sc">~</span>temp_feel, </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">"scatter3d"</span>, <span class="at">mode =</span> <span class="st">"markers"</span>, <span class="at">size =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e0faacd76b3a0a2a785f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e0faacd76b3a0a2a785f">{"x":{"visdat":{"b1f874cf43b0":["function () ","plotlyVisDat"]},"cur_data":"b1f874cf43b0","attrs":{"b1f874cf43b0":{"z":{},"y":{},"x":{},"mode":"markers","size":0.5,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"temp_feel"},"yaxis":{"title":"windspeed"},"zaxis":{"title":"rides"}},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"z":[654,670,1229,1454,1518,1518,1362,891,768,1280,1220,1137,1368,1367,1026,953,883,674,1572,1844,1468,888,836,1330,1799,472,416,1129,975,956,1459,1313,1454,1489,1620,905,1269,1592,1466,1552,1491,1597,1184,1192,1705,1675,1897,2216,2348,1103,1173,912,1376,1778,1707,1341,1545,1708,1365,1714,1903,1562,1730,1437,491,1628,1817,1700,577,1730,1408,1435,1687,1767,1871,2320,2355,1693,1424,1676,2243,1918,1699,1910,1515,1221,1806,2108,1368,1506,1920,1354,1598,2381,1628,2395,2570,1299,1576,1707,2493,1777,1953,2738,2484,674,2186,2760,2795,3331,3444,1506,2574,2481,3300,3722,3325,3489,3717,3347,2213,3554,3848,2378,3819,3714,3102,2932,3698,4109,3632,4169,3413,2507,2971,3185,3445,3319,3840,4008,3547,3084,3438,3833,4238,3919,3808,2757,2433,2549,3309,3461,4232,4414,3473,3221,3875,4070,3725,3352,3771,3237,2993,4157,4164,4411,3222,3981,3312,3105,3311,4061,3846,4044,4022,3420,3385,3854,3916,4377,4488,4116,2915,2367,2978,3634,3845,3838,3348,3348,3138,3363,3596,3594,4196,4220,3505,3296,3617,3789,3688,3152,2825,2298,2556,3272,3840,3901,3784,3176,2916,2778,3537,4044,3107,3777,3843,2773,2487,3480,3695,3896,3980,3854,2646,2482,3563,4004,4026,3166,3356,3277,2624,3925,4614,4181,3107,3893,889,2919,3905,4429,4370,4332,3852,2549,2419,2115,2506,1878,1689,3127,3595,3413,4023,4062,4138,3231,4018,3077,2921,3848,3203,3813,4240,2137,3647,3466,3946,3643,3427,4186,4372,1949,2302,3240,3970,4267,4126,4036,3174,3114,3603,3896,2199,2623,3115,3318,3293,3857,4111,2170,3724,3628,2809,2762,3488,3992,3490,2419,3291,570,2446,3307,3658,3816,3656,3576,2770,2697,3662,3829,3804,2743,2928,2792,2713,3891,3746,1672,2914,3147,2720,2733,2545,1538,2454,935,1697,1819,2261,3614,2818,3425,3545,3672,2908,2851,3578,2468,655,3172,3359,2688,2366,3167,3368,3562,3528,3399,2464,2211,3143,3534,2553,2841,2046,856,451,887,1059,2047,2169,2508,1820,1608,1707,2147,2273,3132,3791,3451,2826,2270,3425,2085,3828,3040,2160,2027,2081,2808,3267,3162,3048,1234,1781,2287,3900,3803,3831,3187,3248,2685,3498,4185,4275,3571,3841,2448,2629,3578,4176,2693,3667,3604,1977,1456,3328,3787,4028,2931,3805,2883,2071,2627,3614,4379,4546,3241,2415,2874,4069,4134,1769,4665,2948,3110,2713,3130,3735,4484,4896,4122,3150,3253,4460,5085,5315,5187,3830,4681,3685,5171,5042,5108,5537,5893,2339,3464,4763,4571,5024,5299,4663,3934,3694,4728,5424,5378,5265,4653,3605,2939,4680,5099,4380,4746,5146,4665,4286,5172,5702,4020,5719,5950,4083,907,3019,5115,5541,4551,5219,3100,4075,4907,5087,5502,5657,5227,4387,4224,5265,4990,4097,5546,5711,4807,3946,2501,4490,6433,6142,6118,4884,4425,3729,5254,4494,5711,5317,3681,3308,3486,4863,6110,6238,3594,5325,5147,5927,6033,6028,6456,6248,4790,4374,5647,4495,6248,6183,6102,4739,4344,4446,5857,5339,5127,4859,4801,4340,5640,6365,6258,5958,4634,4232,4110,5323,5608,4841,4836,4841,3392,3469,5571,5336,6289,6414,5988,4614,4111,5742,5865,4914,5703,5123,3195,4866,5831,6452,6790,5825,5645,4451,4444,6065,6248,6506,6278,5847,4479,3757,5780,5995,6271,6090,4721,4052,4362,5676,5656,6149,6267,5665,5038,3341,5504,5925,6281,6402,6257,4224,3772,5928,6105,6520,6541,5917,3788,3197,4069,5997,6280,5592,6459,4419,5657,6407,6697,6820,6750,6630,5554,5167,5847,3702,6803,6781,6917,5883,5453,6435,6693,6946,6642,6370,5966,4874,6015,4324,6844,6437,6640,4934,2729,4604,5791,6911,6736,6222,4857,4559,5115,6612,6482,6501,4671,5284,4692,6228,6625,6898,6484,6262,5209,3461,20,1009,5147,5520,5229,4109,3906,4881,5220,4709,4975,5283,4446,4562,5172,3767,5122,5125,5214,4316,3747,5050,5100,4531,1470,2307,1745,2115,4750,3836,5062,5080,5306,4240,3757,5679,6055,5398,5035,4659,4429,2787,4841,5219,5009,5107,5182,4280,3248,4373,5124,4934,3814,3402,1544,1379,746,573,432,1867,2451,1182,1432,2290],"y":[10.749881999999999,16.652113,16.636703000000001,10.739832,12.5223,6.0008683999999999,11.304641999999999,17.875868000000001,24.25065,14.958888999999999,8.1828440000000011,20.410008999999999,20.167000000000002,8.4787160000000004,10.583520999999999,12.625011000000001,12.999139,9.8339250000000007,13.957239,13.125567999999999,23.667214000000001,11.521990000000001,16.522200000000002,10.60811,8.696332,19.687950000000001,7.6270789999999993,8.2611000000000008,9.7394549999999995,4.9568341999999994,12.541864,3.5652710000000001,17.708635999999998,18.609383999999999,8.565213,10.792293000000001,9.5006000000000004,3.0423561000000001,24.25065,12.652213,14.869645,7.2728499999999991,13.625589,17.479160999999998,27.999835999999998,19.522058000000001,16.869996999999998,15.416968000000001,17.749975000000003,34.000020999999997,14.956745,20.625682000000001,13.110761,6.3055710000000005,16.783231999999998,23.218112999999999,12.500257,8.3916159999999991,19.408961999999999,14.500475,20.624811000000001,15.125518,13.624181999999999,16.875357000000001,23.000229000000001,22.870584000000001,8.0835499999999989,14.750050000000002,17.545759,15.60899,14.791925000000001,18.130468,9.174042,12.348703,13.608839,14.041792999999998,15.478139000000001,24.667189,13.917306999999999,19.348461,15.125249999999999,15.695487,16.333729000000002,15.458575000000002,14.041257,12.348100000000001,14.217668,15.208731999999999,11.583495999999998,14.582281999999999,17.333435999999999,13.208781999999999,12.208271000000002,25.833257,26.000489000000002,17.625221,10.874904000000001,15.208463999999999,8.9165609999999997,9.8333890000000004,21.739757999999998,18.416893000000002,16.791338999999997,7.4169,15.167125,22.834136000000001,20.334232,10.958989000000001,10.584057,16.208974999999999,21.792286000000001,14.707907000000001,15.458575000000002,12.875724999999999,12.417311,21.875499999999999,20.917399999999997,21.500836000000003,16.084220999999999,15.750025000000001,7.125718,12.291418,22.958689,22.042732000000001,19.791264000000002,15.292482,10.75015,5.0007124999999997,11.792,7.7499569999999993,8.0830140000000004,12.707689,12.041575,9.0416500000000006,10.249593000000001,8.5003570000000011,18.582718,13.499964,7.2502710000000006,8.3758710000000001,8.0835499999999989,9.9165360000000007,15.667414000000001,13.875164,10.333610999999999,13.376014,16.125492999999999,15.416164,14.333845999999999,8.7920750000000005,7.4590429999999994,13.875164,19.583229000000003,16.959106999999999,8.2505140000000008,9.2923639999999992,8.1670320000000007,12.583136,9.1667389999999997,10.042161,9.4171180000000003,10.374949999999998,10.958989000000001,20.458449999999999,18.041961000000001,11.250104,13.833557000000001,9.5829429999999984,8.0003360000000008,6.8339999999999996,10.416824999999999,11.458674999999999,11.541554,15.999867999999999,14.875674999999999,14.041257,6.3337310999999996,7.2083959999999996,9.6669610000000006,17.542007000000002,12.415903999999999,6.8747360000000004,7.7091539999999998,15.333486000000001,5.4591064000000005,8.4592860000000005,10.042161,10.666399999999999,15.083643,11.250104,12.292557,18.916578999999999,13.417018000000001,9.7909109999999995,16.124689,12.249810999999999,13.958914,16.417211000000002,14.458868000000001,8.7501999999999995,7.6257390000000003,14.875406999999999,8.9177,8.7918070000000004,11.334457,6.0841560999999995,13.417286000000001,12.292020999999998,11.958093,11.667246,11.291979,11.042471000000001,10.500038999999999,13.79195,9.0840610000000002,13.20905,12.374632,15.29275,13.499629000000001,12.875724999999999,10.125107,13.417286000000001,11.041332000000001,8.4166070000000008,14.167418,14.916411,13.999917999999999,15.834042999999999,9.6256889999999995,15.624936,9.3336359999999985,6.9992890000000001,16.666518,18.542249999999999,9.8331210000000002,16.958235999999999,14.125811000000001,5.6254874999999993,25.166338999999997,20.412153,10.708275,8.3755360000000003,5.5833310999999997,9.5003320000000002,9.3752429999999993,12.416774999999999,13.833289000000001,14.250632,23.044180999999998,6.5003936000000007,12.914116,8.3333930000000009,10.291736,7.7086180000000004,5.9571710000000007,9.5008680000000005,11.209099999999999,18.166782000000001,11.000261,12.708225000000001,11.958361,10.166714000000001,9.0419180000000008,6.4590813999999996,8.5843749999999996,5.2505689000000002,5.2516810999999999,3.3754064000000001,7.4169,7.9174569999999997,9.9581430000000015,11.583161,13.833824999999999,19.583832000000001,14.874871000000001,5.5841685999999999,13.792218,11.87575,9.0419180000000008,1.5002439000000001,3.0420813999999998,4.2511500000000009,2.8343813999999998,9.5838140000000003,16.626049999999999,9.4997290000000003,15.000161,17.291561000000002,18.875039000000001,11.750393000000001,7.3758290000000004,16.303712999999998,28.292425000000001,14.833532,6.2086689000000002,6.6673375000000004,7.9590639999999997,11.166086,9.9590139999999998,13.250121,15.375093,23.541857,11.833339,7.1254499999999998,9.0832569999999997,5.5001439000000003,9.1667389999999997,18.209192999999999,12.667154,6.1676314000000003,3.8340749999999999,4.6255125000000001,4.1671186000000002,12.667489000000002,21.083224999999999,14.208154,18.875306999999999,20.541931999999999,13.375411,9.1675430000000002,20.459254000000001,11.291710999999999,15.041232000000001,12.45865,9.2496179999999999,7.9590639999999997,22.500274999999998,11.209368,6.6260186000000001,4.5841935999999999,13.999917999999999,9.5221739999999997,17.292164,18.167586,14.750586,6.7505179999999996,6.4174810999999998,5.6252060999999998,4.1679561000000005,15.583061000000001,17.833725000000001,16.083886,5.5420189000000004,15.625807,4.4582938999999993,4.2511500000000009,9.4168500000000002,4.0842061000000003,17.958814,17.458525000000002,16.292189,11.375192999999999,11.584032000000001,4.1252436000000001,14.8338,3.1674249999999997,18.374482,12.750368,10.391097,16.044155,12.626150000000001,19.695386999999997,8.0006040000000009,9.0005790000000001,14.750318,12.875189000000001,22.087554999999998,24.499956999999998,12.3749,8.709128999999999,11.249836,11.708786,12.833314,6.6263000000000005,12.565984,8.7918070000000004,12.124789,25.333235999999999,12.541261,16.834285999999999,15.500985999999999,23.39171,27.833742999999998,14.750586,13.584250000000001,14.917014,13.375745999999999,7.4174360000000004,8.292389,10.791757,4.9175186000000002,22.958689,14.125543,16.083349999999999,14.458064,17.541739,12.667489000000002,12.541529000000001,11.959232,8.1670320000000007,11.791732,10.304600000000001,9.8743929999999995,8.9593070000000008,13.000479,7.8342430000000007,19.416332000000001,27.417204000000002,11.207960999999999,9.4589929999999995,12.167199999999999,6.1254750000000007,13.791682,12.792242999999999,16.958504000000001,15.348561,13.783039,15.709557,12.791171,15.916988999999999,28.250014,13.750343000000001,17.958211000000002,12.958939000000001,12.000838999999999,15.208129,9.7085679999999996,10.792293000000001,22.416257000000002,15.333486000000001,13.458625,23.167193000000001,29.584720999999998,27.791599999999999,15.125249999999999,14.913328999999999,13.916771000000001,15.87565,7.7091539999999998,10.042161,7.5838640000000002,7.4171680000000002,8.5011609999999997,10.875239000000001,8.1251569999999997,6.0004060999999993,7.8766540000000003,7.7920999999999996,12.916461,14.791925000000001,25.917007000000002,12.541864,19.541957,21.416550000000001,9.250489,16.791338999999997,11.541888999999999,20.913312999999999,6.7089109999999996,12.125325,14.708443000000001,20.125996000000001,18.416357000000001,15.583932000000001,23.999131999999999,16.708125000000003,19.783358,19.458742999999998,10.416556999999999,12.791439,15.083643,19.083542999999999,18.333143,11.250104,4.4172563999999994,10.041357,19.000328999999997,23.084582000000001,20.334232,16.708660999999999,7.9590639999999997,11.833875000000001,23.291411,8.7083250000000003,7.8328360000000004,11.499746,10.458432,9.2498859999999983,8.9576320000000003,10.916846,10.250463999999999,10.041893,15.458307,19.833943000000001,14.499604,21.042221000000001,15.874779,8.2499110000000009,15.082839,14.250363999999999,9.8752639999999996,8.208304,15.374825,9.1667389999999997,5.6263249999999996,17.042589,15.624668,7.9171889999999996,6.8339999999999996,11.584032000000001,9.4168500000000002,13.332464,14.416456999999999,13.166907,19.791799999999999,9.0000429999999998,13.083693,15.916721000000001,12.499654,12.333829,19.083811000000001,14.041525,5.1673749999999998,10.542450000000001,11.750660999999999,9.6672290000000007,8.9593070000000008,13.916771000000001,14.374581999999998,22.999693000000001,17.000111,11.833339,11.166689,9.7085679999999996,11.707981999999999,9.9171390000000006,7.6254039999999996,7.9587289999999999,12.250413999999999,12.041307,9.7501750000000005,20.125661000000001,23.292014000000002,18.208925000000001,11.50055,11.082939,10.791757,11.291442999999999,13.082889,8.4578789999999984,9.0416500000000006,12.999943,9.7915139999999994,10.958118000000001,8.4171429999999994,12.125325,10.166378999999999,10.166111000000001,9.8339250000000007,5.4169499999999999,9.626493,11.166689,11.000529,7.6667430000000003,9.2086140000000007,11.083743,14.000788999999999,14.2911,6.2926935999999998,9.2917609999999993,14.167418,11.041600000000001,19.082471000000002,10.250463999999999,10.542450000000001,11.416532,10.292339,11.083475,9.4589929999999995,8.6667179999999995,14.458064,17.249686000000001,19.458207000000002,8.6667179999999995,7.8328360000000004,7.4169,10.4587,16.000471000000001,13.834092999999999,8.208304,9.1262039999999995,11.333586,11.374656999999999,9.5003320000000002,15.500718000000001,11.917089000000001,5.7921500000000004,8.7085930000000005,4.8756436000000001,4.7089811000000008,5.6679186000000001,4.8337686,16.375336000000001,15.333486000000001,8.6251109999999986,12.791975000000001,7.5416539999999994,5.1668189,11.291710999999999,7.5835290000000004,4.2927435999999997,10.125107,15.833507000000001,12.583136,9.5422069999999994,11.500282,18.833967999999999,15.041232000000001,17.333771000000002,6.1676314000000003,8.8336819999999996,5.5422935999999998,6.9588209999999995,16.583907,6.0422810999999994,10.166714000000001,23.958328999999999,14.416725,7.9171889999999996,10.333342999999999,19.000060999999999,14.958285999999999,9.5410679999999992,15.833507000000001,16.3748,9.0009139999999999,10.999993,15.249468,9.0421859999999992,6.0838814000000001,6.9998249999999995,4.4585686000000004,7.8755819999999996,7.1254499999999998,17.957675000000002,9.4578539999999993,12.708493000000001,12.7501,12.584007,12.166931999999999,15.751163999999999,9.7915139999999994,18.667003999999999,19.834479000000002,12.208807,6.7918570000000003,15.874779,9.0419180000000008,7.8749789999999997,11.125617999999999,5.4593810999999999,6.3345685999999999,4.8762064000000001,8.3331250000000008,8.8752890000000004,15.791364000000002,26.666535999999997,23.999400000000001,14.271603000000001,11.166689,10.542182,17.833725000000001,18.125443000000001,12.000235999999999,15.833774999999999,11.625370999999999,20.375236000000001,23.304945,14.375386000000001,3.8756686,8.5425000000000004,11.625639,22.917082000000001,13.374874999999999,10.250128999999999,11.458674999999999,12.041843,15.250004000000001,15.749489000000001,5.5425750000000003,6.9174820000000006,3.5423436000000001,9.9174070000000007,25.250357000000001,10.083500000000001,3.1255499999999996,15.916653999999999,14.125007,7.7399740000000001,3.9175436000000001,4.0001813999999998,8.3333930000000009,5.5422935999999998,11.666643000000001,21.709406999999999,11.708518,8.7501999999999995,6.7923929999999997,10.584325,12.750636,19.834479000000002,10.916779,11.666643000000001,8.7923430000000007,7.1254499999999998,6.749714,6.5833061000000006,14.834067999999998,12.334163999999999,8.8750210000000003,25.083661000000003,27.292182,8.9165609999999997,5.1744368000000005,11.304641999999999,21.208582,23.458911000000001,10.416556999999999,8.3336609999999993,23.500518,10.374682],"x":[64.726249999999993,63.836509999999997,49.04645,51.090980000000002,52.634300000000003,52.988810000000001,50.79551,46.60286,42.455750000000002,45.579920000000001,49.231760000000001,46.442570000000003,45.579470000000001,48.957170000000005,54.330079999999995,53.079530000000005,47.909390000000002,52.909970000000001,58.857979999999998,54.954500000000003,46.204970000000003,39.116264000000001,40.895519,42.613700000000001,53.107340000000001,50.323999999999998,51.773000000000003,52.098529999999997,51.091340000000002,54.528979999999997,48.762500000000003,53.107700000000001,54.897530000000003,48.00902,52.572830000000003,53.875219999999999,58.250390000000003,59.329219999999999,49.842140000000001,44.985469999999999,45.459319999999998,51.215810000000005,52.965860000000006,61.170169999999999,67.851500000000001,54.884659999999997,60.457999999999998,70.579219999999992,78.078469999999996,67.22636,56.959699999999998,57.566749999999999,48.74297,54.114530000000002,58.027189999999997,63.541490000000003,57.397280000000002,63.599810000000005,68.010619999999989,55.749110000000002,60.80639,50.011970000000005,55.011110000000002,66.090109999999996,64.962680000000006,53.461489999999998,59.216000000000001,57.794719999999998,66.710120000000003,59.450000000000003,61.317499999999995,66.208190000000002,61.880000000000003,60.636020000000002,65.023699999999991,68.929969999999997,79.430810000000008,73.987250000000003,61.317499999999995,68.876149999999996,71.657780000000002,62.41451,56.374969999999998,55.068080000000002,55.18139,54.53051,55.181660000000008,58.361720000000005,58.761499999999998,55.181750000000001,57.510859999999994,60.407330000000002,66.089030000000008,80.863609999999994,67.851500000000001,66.884720000000002,71.032640000000015,61.203110000000009,62.737609999999997,70.406329999999997,82.869529999999997,76.374859999999998,69.555470000000014,73.646780000000007,71.772170000000003,70.294280000000001,72.112639999999999,77.283140000000003,76.03322,82.795279999999991,72.850279999999998,60.975859999999997,72.510889999999989,81.658670000000001,83.705000000000013,85.467470000000006,83.762780000000006,84.103610000000003,76.77167,73.761890000000008,72.338359999999994,79.954970000000003,84.387110000000007,68.418499999999995,71.772529999999989,74.670530000000014,78.135889999999989,78.703969999999998,79.272140000000007,79.044890000000009,79.555999999999997,79.102670000000003,76.486999999999995,77.056610000000006,80.240000000000009,81.546080000000003,80.467610000000008,79.444220000000001,77.96678,79.613780000000006,83.47775,83.705000000000013,85.126640000000009,86.433170000000004,87.398780000000002,90.92192,89.330719999999999,87.114110000000011,87.399500000000018,92.39828,97.284469999999999,96.887029999999996,89.95478,84.841970000000003,85.522639999999996,87.512360000000001,87.967219999999998,91.035499999999999,97.455110000000005,100.18210999999999,95.296279999999996,93.023420000000016,89.899250000000009,86.148860000000013,85.239140000000006,84.897860000000009,85.581140000000005,86.034469999999999,89.955860000000001,90.126140000000007,85.581140000000005,89.388139999999993,94.444609999999997,94.444969999999998,91.092470000000006,89.898169999999993,89.386610000000005,89.330360000000013,94.330219999999997,90.92192,89.330719999999999,90.694580000000002,92.057720000000003,92.171750000000003,91.887529999999998,94.670419999999993,93.706969999999998,93.818389999999994,92.343469999999996,91.77422,94.102249999999998,97.682360000000003,98.534750000000003,94.046360000000007,89.159359999999992,88.193389999999994,89.443669999999997,92.284970000000001,95.353250000000003,99.273110000000003,99.216499999999996,106.37339,107.68064,104.38583,103.53461,96.886219999999994,94.728110000000015,94.160030000000006,98.590999999999994,102.73703,97.568330000000003,97.681640000000002,95.296279999999996,95.636390000000006,93.194329999999994,91.830920000000006,91.091030000000003,92.853859999999997,96.376279999999994,95.295469999999995,97.17089,93.648470000000003,90.636889999999994,90.863780000000006,90.127219999999994,88.19492000000001,87.455029999999994,90.125330000000005,92.000389999999996,91.603219999999993,88.989890000000003,90.409639999999996,92.79725000000002,89.442859999999996,86.546030000000002,88.762280000000004,90.126859999999994,91.375969999999995,89.200040000000001,90.316310000000001,86.716219999999993,85.523359999999997,87.000889999999998,87.342890000000011,86.432720000000003,88.989170000000001,91.88861,88.308140000000009,78.367999999999995,80.980609999999999,81.982489999999999,84.105140000000006,86.716579999999993,86.830610000000007,86.191700000000012,86.319860000000006,88.420999999999992,81.830389999999994,73.532749999999993,75.066079999999999,76.148330000000001,79.670749999999998,79.899529999999999,81.547970000000007,81.946669999999997,78.991249999999994,82.797079999999994,83.537329999999997,85.013779999999997,83.707249999999988,83.764219999999995,83.70608,81.034610000000001,69.157669999999996,63.078530000000001,67.284140000000008,74.557220000000001,79.442419999999998,75.238249999999994,77.396360000000001,78.191779999999994,79.158469999999994,80.863249999999994,81.14864,78.594529999999992,81.662360000000007,79.670749999999998,76.885249999999999,77.283860000000004,77.965249999999997,79.044890000000009,78.246319999999997,73.987250000000003,70.123639999999995,70.294280000000001,70.00997000000001,73.136030000000005,73.703749999999999,74.556139999999999,73.134140000000002,60.693080000000002,52.512169999999998,60.919609999999999,64.045670000000001,67.737920000000003,67.111969999999999,68.532889999999995,68.305279999999996,61.146859999999997,64.612220000000008,68.078389999999999,69.102140000000006,68.817110000000014,65.634890000000013,59.613529999999997,64.21477999999999,70.749499999999998,79.21508,77.682109999999994,72.678920000000005,61.089889999999997,56.544889999999995,61.203470000000003,73.135220000000004,72.055579999999992,69.952640000000002,70.74833000000001,65.522390000000001,66.260390000000001,66.657830000000004,73.021999999999991,76.110979999999998,72.623750000000001,60.009889999999999,59.499859999999998,61.828969999999998,59.954359999999994,63.418999999999997,67.453249999999997,73.075999999999993,68.022140000000007,55.124420000000001,60.578779999999995,55.977080000000001,54.783859999999997,56.317639999999997,59.102420000000002,62.452579999999998,69.101330000000004,64.384250000000009,54.443390000000001,54.102110000000003,57.283969999999997,67.680859999999996,70.521529999999998,70.350890000000007,65.976169999999996,58.931780000000003,57.196489999999997,60.398150000000001,61.486969999999999,57.197659999999999,55.750279999999997,60.693080000000002,69.270890000000009,65.805890000000005,54.707359999999994,43.364750000000001,42.74033,57.057079999999999,62.624029999999998,67.170109999999994,62.623220000000003,54.273110000000003,60.694339999999997,57.453890000000001,66.374420000000001,54.44258,48.477829999999997,46.546250000000001,49.159669999999998,64.785020000000003,56.772860000000001,49.10342,51.886219999999994,47.738750000000003,46.602499999999999,53.875219999999999,63.419719999999998,58.53389,64.044499999999999,69.384469999999993,61.374109999999995,56.544889999999995,55.636249999999997,66.31853000000001,73.988420000000005,67.907389999999992,59.841140000000003,56.545250000000003,55.806890000000003,58.678340000000006,64.499359999999996,55.977890000000002,55.578919999999997,58.42022,50.978029999999997,41.14922,52.512169999999998,62.055140000000009,63.646610000000003,61.714579999999998,63.646610000000003,63.988249999999994,55.920920000000002,56.60519,58.560169999999999,67.340029999999999,72.000140000000002,68.987390000000005,55.010750000000002,56.14772,64.215859999999992,63.817250000000001,63.362300000000005,74.783389999999997,64.385780000000011,69.214280000000002,59.271889999999999,53.705390000000001,54.953779999999995,66.658999999999992,79.214359999999999,67.737470000000002,56.999029999999998,64.3703,73.363280000000003,80.863609999999994,81.375529999999998,79.954250000000002,71.26061,77.454139999999995,73.760000000000005,79.953890000000001,80.467970000000008,78.193219999999997,79.841030000000003,83.306029999999993,75.805970000000002,71.373919999999998,71.487500000000011,60.408859999999997,74.385500000000008,75.407360000000011,65.805890000000005,69.953720000000004,69.555830000000014,70.476169999999996,73.533469999999994,80.010500000000008,70.804670000000002,67.169029999999992,70.351609999999994,76.318250000000006,74.897420000000011,71.26097,62.354660000000003,66.884360000000001,70.862719999999996,75.919640000000001,83.648750000000007,87.343250000000012,85.863830000000007,73.133420000000001,76.374140000000011,78.419749999999993,80.862889999999993,67.055360000000007,59.101249999999993,68.475470000000001,74.328530000000001,75.522469999999998,72.73733,65.975359999999995,72.510889999999989,73.192639999999997,83.93189000000001,80.410640000000001,80.351779999999991,85.182530000000014,84.614720000000005,81.206330000000008,79.442779999999999,82.172390000000007,81.77225,76.260469999999998,78.874970000000005,81.033529999999999,84.671420000000012,81.491000000000014,83.876360000000005,85.637750000000011,83.535170000000008,81.600889999999993,83.021719999999988,84.557029999999997,82.910030000000006,84.274249999999995,84.615080000000006,86.603000000000009,88.477609999999999,89.842640000000017,89.728250000000003,93.137,92.569280000000006,87.001609999999999,88.819610000000011,86.716579999999993,82.965919999999997,83.761970000000005,84.045469999999995,79.330280000000016,80.806280000000001,83.249780000000001,85.807580000000002,90.353030000000018,91.716530000000006,91.374889999999994,85.808750000000003,87.000529999999998,88.194469999999995,85.977859999999993,85.523719999999997,83.47775,81.035780000000003,90.922280000000001,96.887749999999997,99.72878,97.17089,90.751279999999994,92.682860000000005,90.863780000000006,85.523359999999997,89.671279999999996,92.796080000000003,102.79517,93.875720000000001,99.556610000000006,95.183419999999998,95.238500000000002,97.910330000000002,100.52303000000001,99.727969999999999,104.44217,103.13564,90.864859999999993,91.831639999999993,90.524389999999997,90.921469999999999,92.113969999999995,91.943780000000004,95.467640000000017,97.171250000000001,100.01147,99.102469999999997,96.317779999999999,87.172250000000005,81.492079999999987,88.081250000000011,94.101529999999997,95.580500000000001,90.864859999999993,98.533670000000001,98.079530000000005,94.784360000000007,92.113969999999995,93.648830000000004,91.660640000000001,92.057720000000003,95.637919999999994,97.058030000000016,99.61403,97.797110000000004,95.922139999999999,94.785889999999995,95.69453,94.955719999999999,92.114779999999996,89.444029999999998,90.012110000000007,91.602860000000007,92.910110000000003,90.863330000000005,90.92192,53.816000000000003,87.626390000000015,86.319860000000006,85.63703000000001,86.092250000000007,87.966859999999997,89.330719999999999,90.239000000000004,87.682640000000006,85.63964,90.92192,91.944500000000005,89.215969999999999,90.750110000000006,94.046000000000006,95.238860000000003,90.409999999999997,91.546610000000015,93.819919999999996,95.80847,90.979609999999994,91.148359999999997,87.000889999999998,84.103250000000003,82.908860000000004,81.886279999999999,83.306749999999994,84.16022000000001,85.467470000000006,84.728030000000004,82.681250000000006,81.774500000000018,82.856030000000004,80.636359999999996,79.897279999999995,83.47739,86.943919999999991,78.703969999999998,77.226169999999996,80.976110000000006,85.69516999999999,86.717750000000009,84.727670000000003,79.726640000000003,78.589670000000012,78.080000000000013,80.809969999999993,85.921970000000002,86.717750000000009,84.216830000000002,80.466890000000006,69.783169999999998,66.884720000000002,71.430080000000004,77.282780000000002,70.805030000000002,70.976390000000009,67.225639999999999,77.73836,80.523499999999999,73.476139999999987,72.509720000000002,78.136250000000004,80.410640000000001,74.555779999999999,73.078609999999998,75.46477999999999,79.727360000000004,82.284890000000004,79.67192,79.047500000000014,78.361969999999985,74.09939,71.545999999999992,59.89181,64.498999999999995,65.294780000000003,64.043779999999998,61.146140000000003,61.658420000000007,59.726750000000003,57.341030000000003,56.715890000000002,62.770189999999999,63.987169999999999,67.454329999999999,69.954170000000005,74.784469999999999,61.090249999999997,57.340670000000003,61.204279999999997,63.248359999999998,61.374470000000002,62.39714,65.805890000000005,66.26003,64.840280000000007,63.533389999999997,66.090109999999996,54.386780000000002,55.182470000000002,62.510360000000006,57.340220000000002,58.078580000000002,58.857979999999998,61.148030000000006,60.521360000000001,64.328720000000004,73.021639999999991,74.214860000000002,70.521080000000012,55.23836,60.976220000000005,67.055720000000008,67.113140000000001,71.201750000000004,62.452669999999998,58.760420000000003,58.47692,58.47728,62.454470000000001,65.294420000000002,68.135000000000005,68.873720000000006,62.794580000000003,62.169529999999995,59.159030000000001,53.250169999999997,55.35239,55.301000000000002,58.501849999999997,51.829970000000003,52.397779999999997,54.954139999999995,53.816000000000003,52.852999999999994,52.11383],"mode":"markers","type":"scatter3d","marker":{"color":"rgba(31,119,180,1)","size":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(31,119,180,1)","width":55},"error_x":{"color":"rgba(31,119,180,1)","width":55},"line":{"color":"rgba(31,119,180,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="exercise-9-follow-up-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-9-follow-up-1">Exercise 9: follow-up</h2>
<p>Ridership tends to increase with temperature (no matter the windspeed) and decrease with windspeed (no matter the temperature).</p>
</section>
<section id="exercise-10-2-quantitative-predictors-modeling-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-10-2-quantitative-predictors-modeling-1">Exercise 10: 2 quantitative predictors – modeling</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>bike_model_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel, bikes)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(bike_model_3))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Estimate Std. Error     t value     Pr(&gt;|t|)
(Intercept) -24.06464 299.303032 -0.08040225 9.359394e-01
windspeed   -36.54372   9.408116 -3.88427585 1.119805e-04
temp_feel    55.51648   3.330739 16.66791759 4.436963e-53</code></pre>
</div>
</div>
<ol type="a">
<li><p>-24.06 = typical ridership on days with 0 windspeed and a 0 degree temperature. (This doesn’t make contextual sense, but indicates where the plane “lives” in space!)</p></li>
<li><ul>
<li>No matter the temperature, every 1 mph increase in windspeed is associated with an average of 37 fewer riders.</li>
<li>Holding temperature constant, every 1 mph increase in windspeed is associated with an average of 37 fewer riders.</li>
</ul></li>
<li><ul>
<li>No matter the windspeed, every 1 degree Fahrenheit increase in temperature is associated with an average of 56 more riders.</li>
<li>Holding windspeed constant, every 1 degree Fahrenheit increase in temperature is associated with an average of 56 more riders.</li>
</ul></li>
</ol>
</section>
<section id="exercise-11-which-is-best-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-11-which-is-best-1">Exercise 11: Which is best?</h2>
<ol type="a">
<li>model 2</li>
<li>temperature</li>
<li>R-squared increases (our model is stronger when we include another predictor)</li>
<li>nope. model 1 (with windspeed and weekend) has a lower R-squared than model 5 (with only temperature)</li>
</ol>
</section>
<section id="exercise-13-practice-1-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-13-practice-1-1">Exercise 13: Practice 1</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> weekend, <span class="at">fill =</span> weather_cat)) <span class="sc">+</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>new_model_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> weekend <span class="sc">+</span> weather_cat, bikes)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(new_model_1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    Estimate Std. Error   t value      Pr(&gt;|t|)
(Intercept)        4211.8741   75.54724 55.751529 9.461947e-265
weekendTRUE        -982.2106  117.24719 -8.377264  2.786301e-16
weather_catcateg2  -608.8640  113.00211 -5.388077  9.628947e-08
weather_catcateg3 -2360.2049  319.71640 -7.382183  4.270163e-13</code></pre>
</div>
</div>
<ul>
<li><p>The average ridership on a <em>weekday</em> with <em>nice</em> weather (categ1) is 4212 rides.</p></li>
<li><p>On days with the same weather (holding weather category constant), the average ridership on a <em>weekend</em> is 982 rides less than on weekdays.</p></li>
<li><p>On days of the same type (weekend vs weekday) (holding day type constant), the average ridership when the weather is “dreary” (categ2) is 609 rides less than when the weather is nice.</p></li>
</ul>
</section>
<section id="exercise-14-practice-2-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-14-practice-2-1">Exercise 14: Practice 2</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp_feel, <span class="at">color =</span> humidity)) <span class="sc">+</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>new_model_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> temp_feel <span class="sc">+</span> humidity, bikes)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(new_model_2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Estimate Std. Error   t value     Pr(&gt;|t|)
(Intercept)   315.83704 303.777334  1.039699 2.988249e-01
temp_feel      60.43316   3.272315 18.468015 9.451345e-63
humidity    -1868.99356 336.963661 -5.546573 4.078901e-08</code></pre>
</div>
</div>
<ul>
<li><p>It doesn’t really make sense to interpret the intercept – we didn’t see any days that were 0 degrees with 0 humidity.</p></li>
<li><p>On days with the same humidity (holding humidity constant), each 1 degree increase in temperature is associated with a decrease in 60 rides on average.</p></li>
<li><p>On days with the same temperature (holding temperature constant), each 1 unit increase in humidity (which corresponds to a change from 0 to 100 percent!) is associated with a decrease of 1867 rides on average. On a more sensible scale, a 10% increase in humidity is linked with an average of 1867 * 0.1 = 187 fewer rides.</p></li>
</ul>
</section>
<section id="exercise-15-practice-3-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-15-practice-3-1">Exercise 15: Practice 3</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>new_model_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> temp_feel <span class="sc">+</span> weather_cat, bikes)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(new_model_3))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     Estimate Std. Error   t value     Pr(&gt;|t|)
(Intercept)        -288.68840 251.264383 -1.148943 2.509574e-01
temp_feel            55.30133   3.215495 17.198387 7.082670e-56
weather_catcateg2  -386.42241 100.187725 -3.856984 1.249775e-04
weather_catcateg3 -1919.01375 283.022420 -6.780430 2.481218e-11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp_feel, <span class="at">color =</span> weather_cat)) <span class="sc">+</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> new_model_3<span class="sc">$</span>fitted.values), <span class="at">linewidth =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>It doesn’t really make sense to interpret the intercept – we didn’t see any days that were 0 degrees.</p></li>
<li><p>On days with the same weather (holding weather category constant), every 1 degree increase in temperature is associated with an average increase of 55 rides.</p></li>
<li><p>On days with the same temperature (holding temperature constant), average ridership is 386 rides lower on a dreary weather day (categ2) than a nice weather day (categ1).</p></li>
</ul>
</section>
<section id="exercise-16-challenge-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-16-challenge-1">Exercise 16: CHALLENGE</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp_feel, <span class="at">color =</span> weekend, <span class="at">size =</span> humidity)) <span class="sc">+</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09_mlr_principles_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>new_model_4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(rides <span class="sc">~</span> temp_feel <span class="sc">+</span> humidity <span class="sc">+</span> weekend, bikes)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">summary</span>(new_model_4))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Estimate Std. Error   t value     Pr(&gt;|t|)
(Intercept)   668.60236 292.181063  2.288315 2.240530e-02
temp_feel      59.36751   3.119256 19.032585 7.626695e-66
humidity    -1906.43437 320.982938 -5.939364 4.433789e-09
weekendTRUE  -869.05771 100.057822 -8.685555 2.471050e-17</code></pre>
</div>
</div>
<ul>
<li><p>It doesn’t really make sense to interpret the intercept – we didn’t see any days that were 0 degrees.</p></li>
<li><p>On days with the same humidity and time of week (holding humidity and day type constant), each 1 degree increase in temperature is associated with an increase of 59 rides on average.</p></li>
<li><p>On days with the same temperature and time of week (holding temperature and day type constant), each 0.1 point increase (10%) in humidity levels is associated with 1906*0.1 = 190.6 rides fewer rides on average.</p></li>
<li><p>On days with the same temperature and humidity (holding temperature and humidity constant), average ridership is 869 rides lower on weekends than on weekdays.</p></li>
</ul>
<p>This model would look like 2 parallel planes, one for weekends and one for weekdays! Why? <code>rides</code> vs <code>temp_feel</code> (quant) would be a line. Adding in <code>humidity</code> (quant) would turn the model into a plane. Adding in <code>weekend</code> (cat) would split this one plane into two unique planes, one for each weekend category!</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Leslie Myint, 2024<br> All content licensed under <img src="https://static.thenounproject.com/png/70967-200.png" height="20"> (<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>)</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Site built with <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>